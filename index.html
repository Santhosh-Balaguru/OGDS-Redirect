<!DOCTYPE html>
<html>
<head>
  <title>Google OAuth Redirect</title>
</head>
<body>
  <h3>Processing Authentication...</h3>
  <script>
    console.log("[Redirect Page] Loaded");

    const hashParams = new URLSearchParams(window.location.hash.substring(1));
    const accessToken = hashParams.get('access_token');

    if (accessToken) {
      console.log("[Redirect Page] Access token received:", accessToken);
      localStorage.setItem('gdrive_token', accessToken);
      document.body.innerHTML = "<h2>✅ Auth successful! You can return to Obsidian.</h2>";
    } else {
      console.warn("[Redirect Page] No access token found");
      document.body.innerHTML = "<h2>❌ Failed to authenticate with Google. Please try again.</h2>";
    }
  </script>
</body>
</html>
